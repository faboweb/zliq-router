{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dd7a60abb89b88670d20","webpack:///./src/router.js","webpack:///./~/zliq/index.js","webpack:///./~/zliq/lib/zliq.js","webpack:///./src/index.js"],"names":["removeRouter","Router","initRouter","interceptClickEventInstance","interceptClickEvent","routerState$","e","target","srcElement","tagName","href","getAttribute","isLocal","startsWith","isAnchor","parseLink","anchor","route","query","undefined","value","pushRoute","preventDefault","window","onpopstate","document","removeEventListener","interceptLinks","addEventListener","event","state","dispatchRouteChange","children$","router$","console","log","$","map","routes","indexOf","patch","concat","sanitizedRoute$","routeWasHit$","is","distinct","wasHit","children","location","params","pathname","search","hash","go","args","length","queryToObject","split","pair","reduce","key","link","regexp","matchArr","exec","url","history","pushState","module","exports","require","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","stream","_typeof","Symbol","iterator","obj","constructor","merge$","isStream","_deepEqual","_deepEqual2","_interopRequireDefault","default","init_value","update","IS_STREAM","listeners","fn","cur","flatMap","filter","deepSelect","selectorArr","until","stopEmit$","partialChange","startValue","debounce","timer","valuesChanged","oldValue","newValue","parent$","notifyListeners","forEach","notifyListener","listener","fork$","mapFunction","initValue","newStream","push","mapValue","result$","updateOuterStream","result","attachToResult$","mapFn","parentValue","getChildStreamValue","flatMapValue","removeItem","filterValue","select","parent","selectors","selector","splice","deepSelectValue","selectorsArr","Array","isArray","arguments","a","b","Promise","resolve","assign","stopEmitValues$","subscribeTo","stopEmitValues","aggregate","reduceValue","curTimer","debounceValue","clearTimeout","setTimeout","updateChildStream","potentialStreamsArr","values","potentialStream","index","updateMergedStream","arr","item","_streamy","keys","_streamyDom","_streamyHyperscript","_streamyHelpers","_utils","_testComponent","render","diff","createNode","TEXT_NODE","vdom$","parentElement","renderUpdate","_ref","_ref2","oldElement","element","oldVersion","version","oldChildren","keyContainer","tag","props","appendChild","newElement","triggerLifecycle","copyChildren","newChild","oldChild","cacheContainer","isCaching","id","diffCachedElement","diffElement","_ref3","_ref4","oldProps","gotCreated","gotUpdated","createElement","vdom","elementCache","diffAttributes","diffChildren","replaceChild","_ref5","_ref6","newChildren","newVersion","isTextNode","updateTextNode","shouldRecycleElement","removeNotNeededNodes","parentElements","remaining","childNodes","warn","childToRemove","removeChild","updateExistingNodes","nodes","addNewNodes","_newChildren$i","cycle","mounted","error","applyPropertyToElement","attribute","applyAttribute","removeNotNeededAttributes","oldAttribute","removeAttribute","className","cssText","join","style","oldChildNodes","unifiedNewChildren","unifyChildren","unifiedOldChildren","child","createTextNode","JSON","parse","stringify","nodeTypeDiffers","nodeName","toLowerCase","Text","nodeValue","testRender","test$","_src","schedule","done","attach","container","body","iteration","fail","testIteration","expect","toEqual","pSlice","slice","objectKeys","isArguments","deepEqual","actual","expected","opts","Date","getTime","strict","objEquiv","isUndefinedOrNull","isBuffer","x","copy","ka","kb","sort","supportsArgumentsClass","toString","supported","unsupported","propertyIsEnumerable","shim","promise$","if$","join$","_","promise","output$","loading","data","then","boolean$","onTrue","onFalse","_len","$arr","_key","h","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_i","_s","next","err","TypeError","flatten","component","mergedChildren$","mergeChildren$","wrapProps$","childrenVdom$arr","array","mutable","arrayTypeStr","node","pop","apply","reverse","nestedStreams","extractNestedStreams","updateStreams","makeNestedStreamUpdateProps"],"mappings":"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","file":"zliq-router.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zliq-router\"] = factory();\n\telse\n\t\troot[\"zliq-router\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dd7a60abb89b88670d20","import {stream, if$, merge$, flatten} from 'zliq'; \r\n\r\nlet interceptClickEventInstance\r\n\r\n// intercepts clicks on links \r\n// if the link is local '/...' we change the location hash instead \r\nfunction interceptClickEvent(routerState$) {\r\n    return (e) => { \r\n        let target = e.target || e.srcElement; \r\n        if (target.tagName === 'A') { \r\n            let href = target.getAttribute('href'); \r\n            let isLocal = href && href.startsWith('/'); \r\n            let isAnchor = href && href.startsWith('#'); \r\n    \r\n            if (isLocal || isAnchor) { \r\n                let {anchor, route, query} = parseLink(href); \r\n                if (route === undefined) { \r\n                    route = routerState$.value.route; \r\n                } \r\n                pushRoute(routerState$, {route, query, anchor}); \r\n                //tell the browser not to respond to the link click \r\n                e.preventDefault();\r\n                return false;\r\n            } \r\n        }\r\n    }\r\n}\r\n\r\nexport function removeRouter () {\r\n    window.onpopstate = () => {}\r\n    document.removeEventListener('click', interceptClickEventInstance); \r\n}\r\nfunction interceptLinks(routerState$) {\r\n    if (interceptClickEventInstance) {\r\n        removeRouter()\r\n    }\r\n    // listen for link click events at the document level \r\n    interceptClickEventInstance = interceptClickEvent(routerState$)\r\n    document.addEventListener('click', interceptClickEventInstance); \r\n\r\n   // react to HTML5 go back and forward events \r\n   window.onpopstate = function(event) { \r\n       if (event.state) { \r\n           let {route, query} = event.state; \r\n           dispatchRouteChange(routerState$, route, query); \r\n       } \r\n   }; \r\n\r\n}\r\n\r\n// this is an element that shows it's content only if the expected route is met \r\nexport function Router({router$, route}, children$) { \r\n   if (!router$) { \r\n       console.log('The Router component needs the routerState$ as attribute.') \r\n       return null; \r\n   } \r\n   if (!route) { \r\n       console.log('The Router component needs the route as attribute.') \r\n       return null; \r\n   } \r\n   // Register the route \r\n   // this is necessary to decide on a default route \r\n   router$.$('routes') \r\n   // routes can be attached async so we check if the route exists and if not add it \r\n   .map((routes) => routes.indexOf(route) === -1 && router$.patch({ routes: routes.concat(route) })); \r\n\r\n   // check if no registered route was hit and set default if so \r\n   let sanitizedRoute$ = router$ \r\n       .map(({route, routes}) => { \r\n           if (routes.indexOf(route) === -1) { \r\n               if (routes.indexOf('/404') !== -1) {\r\n                    return '/404';\r\n               }\r\n               return '/'; \r\n           } \r\n           return route; \r\n       }); \r\n\r\n       \r\n   let routeWasHit$ = sanitizedRoute$.is(route).distinct();\r\n   return merge$([routeWasHit$, children$]).map(([wasHit, children]) => { \r\n       return wasHit ? children : [] \r\n   }); \r\n} \r\n\r\n// provide location for testing purposes \r\nexport function initRouter(location = window.location) { \r\n   let routerState$ = stream({ \r\n       route: '', \r\n       params: {}, \r\n       routes: ['/'] \r\n   }); \r\n\r\n   interceptLinks(routerState$);\r\n    \r\n   // react to initial routing info \r\n   if (location.pathname !== '/' || location.search !== \"\") { \r\n       // construct initial routing link \r\n       let {route, query} = parseLink(`${location.pathname || ''}${location.search || ''}${location.hash || ''}`); \r\n       dispatchRouteChange(routerState$, route, query); \r\n   }\r\n\r\n   routerState$.go = (...args) => { \r\n       if (args.length > 0 && typeof args[0] === 'string') {\r\n            pushRoute(routerState$, parseLink(args[0]))\r\n       } else {\r\n           pushRoute(routerState$, ...args) \r\n       }\r\n   }\r\n\r\n   return routerState$; \r\n}\r\n\r\n\r\nfunction queryToObject(query = '') {\r\n    return query\r\n    .split('&')\r\n    .map(pair => pair.split('='))\r\n    .reduce((params, [key, value]) => {\r\n        params[key] = value\r\n        return params\r\n    }, {})\r\n}\r\n\r\n// matching links in the form of /route/subroute?param1=a&param2=b#anchor \r\nfunction parseLink(link) {\r\n    let regexp = /((\\/\\w*)*)?(\\?((\\w+=\\w*)(&(\\w+=\\w*)+)*))?(#(\\w+))?/; \r\n    let matchArr = regexp.exec(link); \r\n    // console.log(link, matchArr)\r\n   return { \r\n       anchor: matchArr[9], \r\n       route: matchArr[1], \r\n       query: matchArr[4]\r\n   } \r\n}\r\n\r\n// callback for HTML5 navigation events \r\n// save the routing info in the routerState \r\nfunction dispatchRouteChange(routerState$, route, query) {\r\n    routerState$.patch({ \r\n       route: route || '', \r\n       params: queryToObject(query)\r\n   }); \r\n} \r\n\r\nfunction pushRoute(routerState$, {route, query, anchor}) { \r\n    let url = `${route || '/'}${query ? '?' + query : ''}`\r\n    // location.replace(url)\r\n    history.pushState({anchor, route, query}, '', `${route}${query ? '?' + query : ''}`); \r\n    if (anchor) { \r\n      location.hash = '#' + anchor; \r\n    } \r\n    dispatchRouteChange(routerState$, route, query); \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","module.exports = require('./lib/zliq')\n\n\n// WEBPACK FOOTER //\n// ./~/zliq/index.js","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.stream = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.merge$ = merge$;\nexports.isStream = isStream;\n\nvar _deepEqual = __webpack_require__(5);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n* stream constructor\r\n* constructor returns a stream\r\n* get the current value of stream like: stream.value\r\n*/\nvar stream = exports.stream = function stream(init_value) {\n\tvar s = function s(value) {\n\t\tif (value === undefined) {\n\t\t\treturn s.value;\n\t\t}\n\t\tupdate(s, value);\n\t\treturn s;\n\t};\n\n\ts.IS_STREAM = true;\n\ts.value = init_value;\n\ts.listeners = [];\n\n\ts.map = function (fn) {\n\t\treturn map(s, fn);\n\t};\n\ts.is = function (value) {\n\t\treturn map(s, function (cur) {\n\t\t\treturn cur === value;\n\t\t});\n\t};\n\ts.flatMap = function (fn) {\n\t\treturn flatMap(s, fn);\n\t};\n\ts.filter = function (fn) {\n\t\treturn filter(s, fn);\n\t};\n\ts.deepSelect = function (fn) {\n\t\treturn deepSelect(s, fn);\n\t};\n\ts.distinct = function (fn) {\n\t\treturn distinct(s, fn);\n\t};\n\ts.$ = function (selectorArr) {\n\t\treturn query(s, selectorArr);\n\t};\n\ts.until = function (stopEmit$) {\n\t\treturn until(s, stopEmit$);\n\t};\n\ts.patch = function (partialChange) {\n\t\treturn patch(s, partialChange);\n\t};\n\ts.reduce = function (fn, startValue) {\n\t\treturn reduce(s, fn, startValue);\n\t};\n\ts.debounce = function (timer) {\n\t\treturn debounce(s, timer);\n\t};\n\n\treturn s;\n};\n\n/*\r\n* wrapper for the diffing of stream values\r\n*/\nfunction valuesChanged(oldValue, newValue) {\n\treturn !(0, _deepEqual2.default)(oldValue, newValue);\n}\n\n/*\r\n* update the stream value and notify listeners on the stream\r\n*/\nfunction update(parent$, newValue) {\n\tparent$.value = newValue;\n\tnotifyListeners(parent$.listeners, newValue);\n}\n\n/*\r\n* provide a new value to all listeners registered for a stream\r\n*/\nfunction notifyListeners(listeners, value) {\n\tlisteners.forEach(function notifyListener(listener) {\n\t\tlistener(value);\n\t});\n}\n\n/*\r\n* Do not pipe the value undefined. This allows to wait for an external initialization.\r\n* It also saves you from checking for an initial null on every map function.\r\n*/\nfunction fork$(parent$, mapFunction) {\n\tvar initValue = parent$.value !== undefined ? mapFunction(parent$.value) : undefined;\n\treturn stream(initValue);\n}\n\n/*\r\n* provides a new stream applying a transformation function to the value of a parent stream\r\n*/\nfunction map(parent$, fn) {\n\tvar newStream = fork$(parent$, fn);\n\tparent$.listeners.push(function mapValue(value) {\n\t\tnewStream(fn(value));\n\t});\n\treturn newStream;\n}\n\n/*\r\n* provides a new stream applying a transformation function to the value of a parent stream\r\n*/\nfunction flatMap(parent$, fn) {\n\tvar result$ = void 0;\n\tvar listener = function updateOuterStream(result) {\n\t\tnewStream(result);\n\t};\n\tfunction attachToResult$(mapFn, parentValue, listener) {\n\t\tvar result$ = mapFn(parentValue);\n\t\tresult$.listeners.push(listener);\n\t\treturn result$;\n\t}\n\tvar newStream = fork$(parent$, function getChildStreamValue(value) {\n\t\tresult$ = attachToResult$(fn, value, listener);\n\t\treturn result$.value;\n\t});\n\tparent$.listeners.push(function flatMapValue(value) {\n\t\t// clean up listeners or they will stack on child streams\n\t\tif (result$) {\n\t\t\tremoveItem(result$.listeners, listener);\n\t\t}\n\n\t\tresult$ = attachToResult$(fn, value, listener);\n\t\tnewStream(result$.value);\n\t});\n\treturn newStream;\n}\n\n/*\r\n* provides a new stream that only serves the values that a filter function returns true for\r\n* still a stream ALWAYS has a value -> so it starts at least with NULL\r\n*/\nfunction filter(parent$, fn) {\n\tvar newStream = fork$(parent$, function (value) {\n\t\treturn fn(value) ? value : undefined;\n\t});\n\tparent$.listeners.push(function filterValue(value) {\n\t\tif (fn(value)) {\n\t\t\tnewStream(value);\n\t\t}\n\t});\n\treturn newStream;\n}\n\n/*\r\n* recursivly return the nested property of an object defined by an array of selectors\r\n* parent: {foo: {bar:1}}, selectors: ['foo','bar'] returns 1\r\n*/\nfunction select(parent, selectors) {\n\tif (parent === null || parent === undefined) {\n\t\treturn null;\n\t}\n\tif (selectors.length === 0) {\n\t\treturn parent;\n\t}\n\tvar selector = selectors[0];\n\treturn select(parent[selector], selectors.splice(1, selectors.length - 1));\n}\n/*\r\n* provides a new stream that has a selected sub property of the object value of the parent stream\r\n* the selector has the format [{propertyName}.]*\r\n*/\nfunction deepSelect(parent$, selector) {\n\tvar selectors = selector.split('.');\n\n\tvar newStream = fork$(parent$, function (value) {\n\t\treturn select(value, selectors);\n\t});\n\tparent$.listeners.push(function deepSelectValue(newValue) {\n\t\tnewStream(select(newValue, selectors));\n\t});\n\treturn newStream;\n}\n\nfunction query(parent$, selectorsArr) {\n\tif (!Array.isArray(selectorsArr)) {\n\t\treturn parent$.map(function (value) {\n\t\t\treturn select(value, selectorsArr.split('.'));\n\t\t});\n\t}\n\treturn parent$.map(function (value) {\n\t\treturn selectorsArr.map(function (selectors) {\n\t\t\treturn select(value, selectors.split('.'));\n\t\t});\n\t});\n}\n\n// TODO: maybe refactor with filter\n/*\r\n* provide a new stream that only notifys its children if the containing value actualy changes\r\n*/\nfunction distinct(parent$) {\n\tvar fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (a, b) {\n\t\treturn valuesChanged(a, b);\n\t};\n\n\tvar newStream = fork$(parent$, function (value) {\n\t\treturn value;\n\t});\n\tparent$.listeners.push(function deepSelectValue(value) {\n\t\tif (fn(newStream.value, value)) {\n\t\t\tnewStream(value);\n\t\t}\n\t});\n\treturn newStream;\n}\n\n/*\r\n* update only the properties of an object passed\r\n* i.e. {name: 'Fabian', lastname: 'Weber} patched with {name: 'Fabo'} produces {name: 'Fabo', lastname: 'Weber}\r\n*/\nfunction patch(parent$, partialChange) {\n\treturn new Promise(function (resolve) {\n\t\tif (partialChange === null || (typeof partialChange === 'undefined' ? 'undefined' : _typeof(partialChange)) !== 'object' || _typeof(parent$.value) !== 'object') {\n\t\t\tparent$(partialChange);\n\t\t} else {\n\t\t\tparent$(Object.assign({}, parent$.value, partialChange));\n\t\t}\n\t\tresolve(parent$);\n\t\t// setImmediate(() => {\n\t\t// })\n\t});\n}\n\nfunction until(parent$, stopEmitValues$) {\n\tvar newStream = stream();\n\tvar subscribeTo = function subscribeTo(stream, listener) {\n\t\tlistener(parent$.value);\n\t\tstream.listeners.push(listener);\n\t};\n\tif (stopEmitValues$.value === undefined) {\n\t\tsubscribeTo(parent$, newStream);\n\t}\n\tstopEmitValues$.map(function (stopEmitValues) {\n\t\tif (stopEmitValues) {\n\t\t\tremoveItem(parent$.listeners, newStream);\n\t\t} else {\n\t\t\tsubscribeTo(parent$, newStream);\n\t\t}\n\t});\n\treturn newStream;\n}\n\n/*\r\n* reduce a stream over time\r\n* this will pass the last output value to the calculation function\r\n* reads like the array reduce function\r\n*/\nfunction reduce(parent$, fn, startValue) {\n\tvar aggregate = startValue;\n\tvar newStream = stream();\n\tfunction reduceValue(value) {\n\t\taggregate = fn(aggregate, parent$.value);\n\t\tnewStream(aggregate);\n\t}\n\tif (parent$.value !== undefined) {\n\t\treduceValue(parent$.value);\n\t}\n\tparent$.listeners.push(reduceValue);\n\treturn newStream;\n}\n\nfunction debounce(parent$, timer) {\n\tvar curTimer = void 0;\n\tfunction debounceValue(value) {\n\t\tif (curTimer) {\n\t\t\twindow.clearTimeout(curTimer);\n\t\t}\n\t\tcurTimer = setTimeout(function updateChildStream() {\n\t\t\tnewStream(value);\n\t\t\tcurTimer = null;\n\t\t}, timer);\n\t}\n\tvar newStream = stream();\n\tif (parent$.value !== undefined) {\n\t\tdebounceValue(parent$.value);\n\t}\n\tparent$.listeners.push(debounceValue);\n\treturn newStream;\n}\n\n/*\r\n* merge several streams into one stream providing the values of all streams as an array\r\n* accepts also non stream elements, those are just copied to the output\r\n* the merge will only have a value if every stream for the merge has a value\r\n*/\nfunction merge$(potentialStreamsArr) {\n\tvar values = potentialStreamsArr.map(function (parent$) {\n\t\treturn parent$ && parent$.IS_STREAM ? parent$.value : parent$;\n\t});\n\tvar newStream = stream(values.indexOf(undefined) === -1 ? values : undefined);\n\n\tpotentialStreamsArr.forEach(function (potentialStream, index) {\n\t\tif (potentialStream.IS_STREAM) {\n\t\t\tpotentialStream.listeners.push(function updateMergedStream(value) {\n\t\t\t\tvalues[index] = value;\n\t\t\t\tnewStream(values.indexOf(undefined) === -1 ? values : undefined);\n\t\t\t});\n\t\t}\n\t});\n\treturn newStream;\n}\n\nfunction isStream(parent$) {\n\treturn parent$ != null && !!parent$.IS_STREAM;\n}\n\nfunction removeItem(arr, item) {\n\tvar index = arr.indexOf(item);\n\tif (index !== -1) {\n\t\tarr.splice(index, 1);\n\t}\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _streamy = __webpack_require__(0);\n\nObject.keys(_streamy).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _streamy[key];\n    }\n  });\n});\n\nvar _streamyDom = __webpack_require__(3);\n\nObject.keys(_streamyDom).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _streamyDom[key];\n    }\n  });\n});\n\nvar _streamyHyperscript = __webpack_require__(9);\n\nObject.keys(_streamyHyperscript).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _streamyHyperscript[key];\n    }\n  });\n});\n\nvar _streamyHelpers = __webpack_require__(8);\n\nObject.keys(_streamyHelpers).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _streamyHelpers[key];\n    }\n  });\n});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(1);\n\nObject.keys(_utils).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _utils[key];\n    }\n  });\n});\n\nvar _testComponent = __webpack_require__(4);\n\nObject.keys(_testComponent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _testComponent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.render = render;\nexports.diff = diff;\nexports.createNode = createNode;\n\nvar _streamy = __webpack_require__(0);\n\nvar TEXT_NODE = '#text';\n\nfunction render(vdom$, parentElement) {\n\tvar debounce = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\n\treturn vdom$.debounce(debounce).reduce(function renderUpdate(_ref, _ref2) {\n\t\tvar oldElement = _ref.element,\n\t\t    oldVersion = _ref.version,\n\t\t    oldChildren = _ref.children,\n\t\t    keyContainer = _ref.keyContainer;\n\t\tvar tag = _ref2.tag,\n\t\t    props = _ref2.props,\n\t\t    children = _ref2.children,\n\t\t    version = _ref2.version;\n\n\t\tif (oldElement === null) {\n\t\t\toldElement = createNode(tag, children);\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.appendChild(oldElement);\n\t\t\t}\n\t\t}\n\t\tvar newElement = diff(oldElement, { tag: tag, props: props, children: children, version: version }, { children: oldChildren, version: oldVersion }, keyContainer);\n\n\t\t// signalise mount of root element on initial render\n\t\tif (parentElement && version === 0) {\n\t\t\ttriggerLifecycle(oldElement, props, 'mounted');\n\t\t}\n\n\t\treturn {\n\t\t\telement: newElement,\n\t\t\tversion: version,\n\t\t\tchildren: copyChildren(children),\n\t\t\tkeyContainer: keyContainer\n\t\t};\n\t}, {\n\t\telement: null,\n\t\tversion: -1,\n\t\tchildren: [],\n\t\tkeyContainer: {}\n\t});\n}\n\nfunction diff(oldElement, newChild, oldChild, cacheContainer) {\n\tvar newElement = oldElement;\n\tvar isCaching = newChild.props && newChild.props.id;\n\t// for keyed elements, we recall unchanged elements\n\tif (isCaching) {\n\t\tnewElement = diffCachedElement(oldElement, newChild, oldChild, cacheContainer);\n\t} else {\n\t\tnewElement = diffElement(oldElement, newChild, oldChild, cacheContainer);\n\t}\n\n\treturn newElement;\n}\n\nfunction diffCachedElement(oldElement, _ref3, _ref4, cacheContainer) {\n\tvar tag = _ref3.tag,\n\t    props = _ref3.props,\n\t    children = _ref3.children,\n\t    version = _ref3.version;\n\tvar oldProps = _ref4.props;\n\n\tvar id = props.id;\n\tvar gotCreated = false;\n\tvar gotUpdated = false;\n\n\t// if there is no cache, create one\n\tif (cacheContainer[id] === undefined) {\n\t\tcacheContainer[id] = {\n\t\t\telement: document.createElement(tag),\n\t\t\tvdom: {\n\t\t\t\ttag: tag,\n\t\t\t\tprops: {},\n\t\t\t\tchildren: []\n\t\t\t}\n\t\t};\n\t\tgotCreated = true;\n\t}\n\n\tvar elementCache = cacheContainer[id];\n\n\t// ignore update if version equals cache\n\tif (version !== elementCache.version) {\n\t\tdiffAttributes(elementCache.element, props, oldProps);\n\t\tdiffChildren(elementCache.element, children, elementCache.vdom.children, cacheContainer);\n\n\t\telementCache.version = version;\n\t\telementCache.vdom.props = props;\n\t\telementCache.vdom.children = children;\n\n\t\tgotUpdated = true;\n\t}\n\n\tif (gotCreated) {\n\t\ttriggerLifecycle(elementCache.element, props, 'created');\n\t} else if (gotUpdated) {\n\t\ttriggerLifecycle(elementCache.element, props, 'updated');\n\t}\n\n\t// elements are updated in place, so only insert cached element if it's not already there\n\tif (oldElement !== elementCache.element) {\n\t\toldElement.parentElement.replaceChild(elementCache.element, oldElement);\n\t\ttriggerLifecycle(elementCache.element, props, 'mounted');\n\t}\n\n\treturn elementCache.element;\n}\n\nfunction diffElement(element, _ref5, _ref6, cacheContainer) {\n\tvar tag = _ref5.tag,\n\t    props = _ref5.props,\n\t    newChildren = _ref5.children,\n\t    newVersion = _ref5.version;\n\tvar oldProps = _ref6.props,\n\t    oldChildren = _ref6.children,\n\t    oldVersion = _ref6.version;\n\n\t// text nodes behave differently then normal dom elements\n\tif (isTextNode(element) && tag === TEXT_NODE) {\n\t\tupdateTextNode(element, newChildren[0]);\n\t\treturn element;\n\t}\n\n\t// if the node types do not differ, we reuse the old node\n\t// we reuse the existing node to save time rerendering it\n\t// we do not reuse/mutate cached (id) elements as this will mutate the cache\n\tif (shouldRecycleElement(element, props, tag) === false) {\n\t\tvar newElement = createNode(tag, newChildren);\n\t\telement.parentElement.replaceChild(newElement, element);\n\t\telement = newElement;\n\t\t// there are no children anymore on the newly created node\n\t\toldChildren = [];\n\t}\n\n\tdiffAttributes(element, props, oldProps);\n\n\t// text nodes have no real child-nodes, but have a string value as first child\n\tif (tag !== TEXT_NODE) {\n\t\tdiffChildren(element, newChildren, oldChildren, cacheContainer);\n\t}\n\n\tif (newVersion === 0) {\n\t\ttriggerLifecycle(element, props, 'created');\n\t}\n\n\tif (newVersion > 0) {\n\t\ttriggerLifecycle(element, props, 'updated');\n\t}\n\n\treturn element;\n}\n\n// this removes nodes at the end of the children, that are not needed anymore in the current state for recycling\nfunction removeNotNeededNodes(parentElements, newChildren, oldChildren) {\n\tvar remaining = parentElements.childNodes.length;\n\tif (oldChildren.length !== remaining) {\n\t\tconsole.warn(\"ZLIQ: Something other then ZLIQ has manipulated the children of the element\", parentElements, \". This can lead to sideffects. Please check your code.\");\n\t}\n\n\tfor (; remaining > newChildren.length; remaining--) {\n\t\tvar childToRemove = parentElements.childNodes[remaining - 1];\n\t\tparentElements.removeChild(childToRemove);\n\n\t\tif (oldChildren.length < remaining) {\n\t\t\tcontinue;\n\t\t} else {\n\t\t\tvar props = oldChildren[remaining - 1].props;\n\n\n\t\t\ttriggerLifecycle(childToRemove, props, 'removed');\n\t\t}\n\t}\n}\n\nfunction updateExistingNodes(parentElement, newChildren, oldChildren, cacheContainer) {\n\tvar nodes = parentElement.childNodes;\n\tfor (var i = 0; i < nodes.length && i < newChildren.length; i++) {\n\t\tdiff(nodes[i], newChildren[i], oldChildren[i], cacheContainer);\n\t}\n}\n\nfunction addNewNodes(parentElement, newChildren, cacheContainer) {\n\tfor (var i = parentElement.childNodes.length; i < newChildren.length; i++) {\n\t\tvar _newChildren$i = newChildren[i],\n\t\t    tag = _newChildren$i.tag,\n\t\t    props = _newChildren$i.props,\n\t\t    children = _newChildren$i.children,\n\t\t    version = _newChildren$i.version;\n\n\t\tvar newElement = createNode(tag, children);\n\n\t\tparentElement.appendChild(newElement);\n\n\t\tdiff(newElement, newChildren[i], {}, cacheContainer);\n\n\t\tif (props && props.cycle && props.cycle.mounted) {\n\t\t\tconsole.error('The \\'mounted\\' lifecycle event is only called on elements with id. As elements are updated in place, it is hard to define when a normal element is mounted.');\n\t\t}\n\t}\n}\n\nfunction diffAttributes(element, props) {\n\tvar oldProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\tif (props !== undefined) {\n\t\tObject.keys(props).map(function applyPropertyToElement(attribute) {\n\t\t\tapplyAttribute(element, attribute, props[attribute]);\n\t\t});\n\t\tObject.keys(oldProps).map(function removeNotNeededAttributes(oldAttribute) {\n\t\t\tif (props[oldAttribute] === undefined) {\n\t\t\t\telement.removeAttribute(oldAttribute);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction applyAttribute(element, attribute, value) {\n\tif (attribute === 'class' || attribute === 'className') {\n\t\telement.className = value || '';\n\t\t// we leave the possibility to define styles as strings\n\t\t// but we allow styles to be defined as an object\n\t} else if (attribute === 'style' && typeof value !== \"string\") {\n\t\tvar cssText = value ? Object.keys(value).map(function (key) {\n\t\t\treturn key + ':' + value[key] + ';';\n\t\t}).join(' ') : '';\n\t\telement.style.cssText = cssText;\n\t\t// other propertys are just added as is to the DOM\n\t} else {\n\t\t// also remove attributes on null to allow better handling of streams\n\t\t// streams don't emit on undefined\n\t\tif (value === null) {\n\t\t\telement[attribute] = undefined;\n\t\t} else {\n\t\t\t// element.setAttribute(attribute, value);\n\t\t\telement[attribute] = value;\n\t\t}\n\t}\n}\n\nfunction diffChildren(element, newChildren) {\n\tvar oldChildren = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\tvar cacheContainer = arguments[3];\n\n\tif (newChildren.length === 0 && oldChildren.length === 0) {\n\t\treturn;\n\t}\n\n\tvar oldChildNodes = element.childNodes;\n\tvar unifiedNewChildren = unifyChildren(newChildren);\n\tvar unifiedOldChildren = unifyChildren(oldChildren);\n\n\tupdateExistingNodes(element, unifiedNewChildren, unifiedOldChildren, cacheContainer);\n\tremoveNotNeededNodes(element, unifiedNewChildren, oldChildren);\n\taddNewNodes(element, unifiedNewChildren, cacheContainer);\n}\n\n/* HELPERS */\n\n/*\r\n* jsx has children mixed as vdom-elements and numbers or strings\r\n* to consistently treat these children similar in the code we transform those numbers and strings\r\n* into vdom-elements with the tag #text that have one child with their value\r\n*/\nfunction unifyChildren(children) {\n\treturn children.map(function (child) {\n\t\t// if there is no tag we assume it's a number or a string\n\t\tif (!(0, _streamy.isStream)(child) && child.tag === undefined) {\n\t\t\treturn {\n\t\t\t\ttag: TEXT_NODE,\n\t\t\t\tchildren: [child],\n\t\t\t\tversion: 0\n\t\t\t};\n\t\t} else {\n\t\t\treturn child;\n\t\t}\n\t});\n}\n\n// create text_nodes from numbers or strings\n// create domNodes from regular vdom descriptions\nfunction createNode(tag, children) {\n\tif (tag === TEXT_NODE) {\n\t\treturn document.createTextNode(children[0]);\n\t} else {\n\t\treturn document.createElement(tag);\n\t}\n}\n\n// to not mutate the representation of our children from the last iteration we clone them\n// we copy the cycle functions for each element, as JSON parse/stringify does not work for functions\nfunction copyChildren(oldChildren) {\n\tvar newChildren = JSON.parse(JSON.stringify(oldChildren));\n\tnewChildren.forEach(function (child, index) {\n\t\tvar oldChild = oldChildren[index];\n\t\tif (oldChild.props && oldChild.props.cycle) {\n\t\t\tchild.cycle = oldChild.props.cycle;\n\t\t}\n\n\t\tif (_typeof(oldChildren[index]) === 'object') {\n\t\t\tchild.children = copyChildren(oldChild.children);\n\t\t}\n\t});\n\treturn newChildren;\n}\n\n// shorthand to call a cycle event for an element if existing\nfunction triggerLifecycle(element, props, event) {\n\tif (props && props.cycle && props.cycle[event]) {\n\t\tprops.cycle[event](element);\n\t}\n}\n\nfunction nodeTypeDiffers(element, tag) {\n\treturn element.nodeName.toLowerCase() !== tag;\n}\n\nfunction isTextNode(element) {\n\treturn element instanceof window.Text;\n}\n\nfunction updateTextNode(element, value) {\n\tif (element.nodeValue !== value) {\n\t\telement.nodeValue = value;\n\t}\n}\n\n// we want to recycle elements to save time on creating and inserting nodes into the dom\n// we don't want to manipulate elements that go into the cache, because they would mutate in the cache as well\nfunction shouldRecycleElement(oldElement, props, tag) {\n\treturn !isTextNode(oldElement) && oldElement.id === \"\" && !nodeTypeDiffers(oldElement, tag);\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.testRender = testRender;\nexports.test$ = test$;\n\nvar _src = __webpack_require__(2);\n\nfunction testRender(vdom$, schedule, done) {\n    var attach = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    var container = document.createElement('div');\n    if (attach) {\n        document.body.appendChild(container);\n    }\n    return test$((0, _src.render)(vdom$, container, 0), schedule, done);\n}\n\nfunction test$(stream, schedule, done) {\n    return stream.reduce(function (iteration, value) {\n        if (schedule[iteration] === undefined) {\n            done.fail('Unexpected Update!');\n        }\n\n        testIteration(schedule, iteration, value, done);\n\n        return iteration + 1;\n    }, 0);\n}\n\nfunction testIteration(schedule, iteration, value, done) {\n    // tests produce async behaviour often syncronous\n    // this can cause race effects on stream declarations\n    // here the iterations are made asynchronous to prevent this\n    setTimeout(function () {\n        try {\n            if (typeof schedule[iteration] === 'function') {\n                schedule[iteration](value);\n            } else {\n                expect(value).toEqual(schedule[iteration]);\n            }\n        } catch (error) {\n            done.fail(error);\n        }\n\n        if (schedule.length === iteration + 1 && done) {\n            done();\n        }\n    });\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar pSlice = Array.prototype.slice;\nvar objectKeys = __webpack_require__(7);\nvar isArguments = __webpack_require__(6);\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n    // 7.3. Other pairs that do not both pass typeof value == 'object',\n    // equivalence is determined by ==.\n  } else if (!actual || !expected || (typeof actual === 'undefined' ? 'undefined' : _typeof(actual)) != 'object' && (typeof expected === 'undefined' ? 'undefined' : _typeof(expected)) != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n    // 7.4. For all other Object pairs, including Array objects, equivalence is\n    // determined by having the same number of owned properties (as verified\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\n    // (although not necessarily the same order), equivalent values for every\n    // corresponding key, and an identical 'prototype' property. Note: this\n    // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n};\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer(x) {\n  if (!x || (typeof x === 'undefined' ? 'undefined' : _typeof(x)) !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {\n    //happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length) return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return (typeof a === 'undefined' ? 'undefined' : _typeof(a)) === (typeof b === 'undefined' ? 'undefined' : _typeof(b));\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar supportsArgumentsClass = function () {\n  return Object.prototype.toString.call(arguments);\n}() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object) {\n  return object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) == 'object' && typeof object.length == 'number' && Object.prototype.hasOwnProperty.call(object, 'callee') && !Object.prototype.propertyIsEnumerable.call(object, 'callee') || false;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports = module.exports = typeof Object.keys === 'function' ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim(obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.promise$ = undefined;\nexports.if$ = if$;\nexports.join$ = join$;\n\nvar _ = __webpack_require__(1);\n\n// wrapper around promises to provide an indicator if the promise is running\nvar promise$ = exports.promise$ = function promise$(promise) {\n\tvar output$ = (0, _.stream)({\n\t\tloading: true,\n\t\terror: null,\n\t\tdata: null\n\t});\n\n\tpromise.then(function (result) {\n\t\toutput$.patch({\n\t\t\tloading: false,\n\t\t\tdata: result\n\t\t});\n\t}, function (error) {\n\t\toutput$.patch({\n\t\t\tloading: false,\n\t\t\terror: error\n\t\t});\n\t});\n\n\treturn output$;\n};\n\n// provide easy switched on boolean streams\n// example use case: <button onclick={()=>open$(!open$())}>{if$(open$, 'Close', 'Open')}</button>\nfunction if$(boolean$) {\n\tvar onTrue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\tvar onFalse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\tif (boolean$ === undefined || !(0, _.isStream)(boolean$)) {\n\t\treturn (0, _.stream)(boolean$ ? onTrue : onFalse);\n\t}\n\treturn boolean$.map(function (x) {\n\t\treturn x ? onTrue : onFalse;\n\t});\n}\n\n// join a mixed array of strings and streams of strings\n// example use case: <div class={join$('container', if$(open$, 'open', 'closed'))} />\nfunction join$() {\n\tfor (var _len = arguments.length, $arr = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t$arr[_key] = arguments[_key];\n\t}\n\n\treturn (0, _.merge$)($arr).map(function (arr) {\n\t\treturn arr.join(' ');\n\t});\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.h = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.flatten = flatten;\n\nvar _streamy = __webpack_require__(0);\n\nvar _streamyDom = __webpack_require__(3);\n\n/*\r\n* wrap hyperscript elements in reactive streams dependent on their children streams\r\n*/\nvar h = exports.h = function h(tag, props) {\n\tfor (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n\t\tchildren[_key - 2] = arguments[_key];\n\t}\n\n\tvar component = void 0;\n\tvar version = -1;\n\n\tvar mergedChildren$ = mergeChildren$(flatten(children));\n\t// jsx usually resolves known tags as strings and unknown tags as functions\n\t// if it is a function it is treated as a componen and will resolve it\n\t// props are not automatically resolved\n\tif (typeof tag === 'function') {\n\t\treturn tag(props || {}, mergedChildren$);\n\t}\n\treturn (0, _streamy.merge$)([wrapProps$(props), mergedChildren$.map(flatten)]).map(function (_ref) {\n\t\tvar _ref2 = _slicedToArray(_ref, 2),\n\t\t    props = _ref2[0],\n\t\t    children = _ref2[1];\n\n\t\treturn {\n\t\t\ttag: tag,\n\t\t\tprops: props,\n\t\t\tchildren: children,\n\t\t\tversion: ++version\n\t\t};\n\t});\n};\n\n/*\r\n* wrap all children in streams and merge those\r\n* we make sure that all children streams are flat arrays to make processing uniform\r\n* input: [stream]\r\n* output: stream([])\r\n*/\nfunction mergeChildren$(children) {\n\tif (!Array.isArray(children)) {\n\t\tchildren = [children];\n\t}\n\tchildren = flatten(children).filter(function (_) {\n\t\treturn _ !== null;\n\t});\n\tvar childrenVdom$arr = children.map(function (child) {\n\t\tif ((0, _streamy.isStream)(child)) {\n\t\t\treturn child.flatMap(mergeChildren$);\n\t\t}\n\t\treturn child;\n\t});\n\n\treturn (0, _streamy.merge$)(childrenVdom$arr);\n}\n\n// flattens an array\nfunction flatten(array, mutable) {\n\tvar toString = Object.prototype.toString;\n\tvar arrayTypeStr = '[object Array]';\n\n\tvar result = [];\n\tvar nodes = mutable && array || array.slice();\n\tvar node;\n\n\tif (!array.length) {\n\t\treturn result;\n\t}\n\n\tnode = nodes.pop();\n\n\tdo {\n\t\tif (toString.call(node) === arrayTypeStr) {\n\t\t\tnodes.push.apply(nodes, node);\n\t\t} else {\n\t\t\tresult.push(node);\n\t\t}\n\t} while (nodes.length && (node = nodes.pop()) !== undefined);\n\n\tresult.reverse(); // we reverse result to restore the original order\n\treturn result;\n}\n\n/*\r\n* Wrap props into one stream\r\n* input: {{}}\r\n* output: stream({})\r\n*/\nfunction wrapProps$(props) {\n\tif (props === null) return (0, _streamy.stream)({});\n\n\tvar nestedStreams = extractNestedStreams(props);\n\tvar updateStreams = nestedStreams.map(function makeNestedStreamUpdateProps(_ref3) {\n\t\tvar parent = _ref3.parent,\n\t\t    key = _ref3.key,\n\t\t    stream = _ref3.stream;\n\n\t\treturn stream.distinct()\n\t\t// here we produce a sideeffect on the props object -> low GC\n\t\t// to trigger the merge we also need to return sth (as undefined does not trigger listeners)\n\t\t.map(function (value) {\n\t\t\tparent[key] = value;\n\t\t\treturn value;\n\t\t});\n\t});\n\treturn (0, _streamy.merge$)(updateStreams).map(function (_) {\n\t\treturn props;\n\t});\n}\n\n// to react to nested streams in an object, we extract the streams and a reference to their position\n// returns [{parentObject, propertyName, stream}]\nfunction extractNestedStreams(obj) {\n\treturn flatten(Object.keys(obj).map(function (key) {\n\t\t// DEPRECATED I can't think of a usecase\n\t\t// if (typeof obj[key] === 'object') {\n\t\t// \treturn extractNestedStreams(obj[key]);\n\t\t// }\n\t\tif (obj[key] && (0, _streamy.isStream)(obj[key])) {\n\t\t\treturn [{\n\t\t\t\tparent: obj,\n\t\t\t\tkey: key,\n\t\t\t\tstream: obj[key]\n\t\t\t}];\n\t\t}\n\t\treturn [];\n\t}));\n}\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=zliq.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/zliq/lib/zliq.js","export * from './router';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}